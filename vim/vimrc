" Don't be vi
  set nocompatible

" Install Plugins
  call plug#begin()
    Plug 'fatih/vim-go', { 'do': ':GoInstallBinaries' }
    Plug 'fatih/molokai'
    Plug 'airblade/vim-gitgutter'
    Plug 'editorconfig/editorconfig-vim'
    Plug 'itchyny/lightline.vim'
    Plug 'scrooloose/nerdtree'
    Plug 'scrooloose/nerdcommenter'
    Plug 'tpope/vim-unimpaired'
    Plug 'tpope/vim-fugitive'
    Plug 'pangloss/vim-javascript'
  call plug#end()

" Keybindings
  let mapleader = ","
  let maplocalleader = ";"

" Make Y consistent with D and C
  map Y           y$

" Auto-indent whole file
  map <silent> <F8> mzgg=G'z :delmarks z<CR>:echo "Reformatted."<CR>

" File tree browser
  map \           :NERDTreeToggle<CR>

" File tree browser showing current file - pipe (shift-backslash)
  map \|          :NERDTreeFind<CR>

" Find File/Buffer/Tag
  map <leader>F   :CtrlPClearCache<CR>:CtrlP<CR>
  map <Leader>f   :CtrlP<CR>
  map <Leader>b   :CtrlPBuffer<CR>

" Comment/uncomment lines
  map <leader>/   <plug>NERDCommenterToggle

" hassle free copy/paste
  nmap <F1> :.w !pbcopy<CR><CR>
  vmap <F1> :w !pbcopy<CR><CR>
  nmap <F2> :set paste<CR>:r !pbpaste<CR>:set nopaste<CR>
  imap <F2> <Esc>:set paste<CR>:r !pbpaste<CR>:set nopaste<CR>

" clear search highlighting
  nnoremap <silent> <C-l> :<C-u>nohlsearch<CR><C-l>

" Bubble single lines
  nmap { [e
  nmap } ]e
  vmap { [egv
" Bubble multiple lines
  vmap } ]egv

" Horizontal block movement
  vmap > >gv
  vmap < <gv

" General Options
  set backspace=indent,eol,start " Let backspace work over anything.
  set clipboard=                 " use system clipboard
  set ffs=unix,mac               " support these EOL formats in this order
  filetype plugin indent on      " load filetype plugins
  set viminfo+=!                 " make sure it can save viminfo
  set updatetime=100             " Swap file update dealy time

" Color
  syntax enable
  set t_Co=256
  let g:molokai_original = 1
  let g:rehash256 = 1
  colorscheme molokai

" Visual Cues
  set showmatch     " show matching brackets
  set hlsearch      " highlight searched for phrases
  set incsearch     " highlight as you type you search phrase
  set history=1024  " History size
  set so=5          " Keep x lines (top/bottom) for scope
  set novisualbell  " don't blink
  set noerrorbells  " no noises

  " Characters to show when whitespace is enabled
  set list
  set listchars=tab:⟶\ ,extends:›,precedes:‹,nbsp:·,trail:·
  match ErrorMsg '\s\+$'

  set noshowmode    " Hide the native mode, use the powerline
  set hidden        " Allow hidden, unsaved buffers
  set splitright    " Add new windows towards the right
  set splitbelow    " ... and bottom

" Text Formatting/Layout
  set fo=tcrqn      " See Help (complex)
  set ai            " autoindent
  set si            " smartindent
  set smarttab      " Use shiftwidth to tab at line beginning
  set cindent       " do c-style indenting
  set tabstop=4     " tab spacing (settings below are just to unify it)
  set softtabstop=4 " unify
  set shiftwidth=4  " =unify
  set expandtab     " Give me spaces or give me death
  set nowrap        " do not wrap lines
  set nrformats=    " treat all numerals as decimal

" Folding
  set foldopen-=search  " don't open folds when you search into them
  set foldopen-=undo    " don't open folds when you undo stuff

" Files/Backups
  set autowrite                     " Save the file when shell/cmd are run
  set autoread
  set wildmenu
  set wildmode=full                 " zsh style command mode completion
  set autoread                      " No prompt for file changes outside Vim
  set swapfile                      " Keep swapfiles
  set wildignore+=tags              " Ignore tags when globbing.
  set wildignore+=tmp/**            " ...Also tmp files.
  set wildignore+=public/uploads/** " ...Also uploads.
  set wildignore+=public/images/**  " ...Also images.
  set wildignore+=vendor/**         " ...Also vendor.
  set isk+=_,$,@,%,#,-              " none of these should be word dividers, so make them not be
  set wildignore+=.git,*.o,tmp/**,vendor/**,node_modules/**
  set directory=~/.vim-tmp,~/tmp,/var/tmp,/tmp
  set backupdir=~/.vim-tmp,~/tmp,/var/tmp,/tmp

" Vim UI
  set laststatus=2                      " Show command bar
  set cmdheight=1                       " the command bar is 2 high
  set relativenumber                    " turn on line numbers
  set numberwidth=3
  set cpoptions+=n                      " show wrapped lines in the line number gutter
  set lz                                " do not redraw while running macros (much faster) (LazyRedraw)
  set hid                               " you can change buffer without saving
  set whichwrap+=<,>,h,l                " backspace and cursor keys wrap to
  set mouse=a                           " use mouse everywhere
  set shortmess=atI                     " shortens messages to avoid 'press a key' prompt
  set report=0                          " tell us when anything is changed via :...
  set fillchars=vert:\ ,stl:\ ,stlnc:\  " make the splitters between windows be blank
  set scrolloff=5                       " Scroll when the cursor is 3 lines from edge
  set cursorline                        " Highlight current line

" Write all writeable buffers when changing buffers or losing focus.
  set autowriteall                " Save when doing various buffer-switching things.
  autocmd BufLeave,FocusLost * silent! wall  " Save anytime we leave a buffer or MacVim loses focus.

" Case insensitive search by default
  set smartcase

" Use shell in vim (sources rvm)
  set shell=/bin/sh

" Plugin Config
  let g:go_fmt_command = "goimports"

  let g:lightline = { 'colorscheme': 'one' }

  let NERDSpaceDelims = 1 " Spaces after comment 
  map <leader>/   <plug>NERDCommenterToggle

